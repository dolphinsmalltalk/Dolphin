| package |
package := Package name: 'Development System Tests'.
package paxVersion: 1;
	preDeclareClassesOnLoad: false;
	basicComment: ''.

package classNames
	add: #AbstractParserErrorTest;
	add: #CompiledMethodTest;
	add: #CompilerErrorTest;
	add: #CompilerTest;
	add: #CompilerTestClasses;
	add: #DolphinCompilerTestMethods;
	add: #DolphinCompilerTestMethodsSubclass;
	add: #ImageListViewTest;
	add: #KeyedAspectTest;
	add: #MethodCategoryEnvironmentTest;
	add: #PackageEnvironmentTest;
	add: #PluggableEnvironmentTest;
	add: #ProductReleaseTest;
	add: #RegKeyTest;
	add: #RewriteTestCase;
	add: #SmalltalkParserTest;
	add: #SmalltalkSystemTest;
	add: #SmalltalkWorkspaceTest;
	add: #StStyler;
	add: #VersionResourceTest;
	add: #VMTest;
	add: #XMLDOMNodeTest;
	yourself.

package methodNames
	add: #BorderLayoutTest -> #testResourceBrowserPreview;
	add: #ExternalIntegerTest -> #testPrintOnNull;
	add: #ExternalIntegerTest -> #testPrintOnSigned;
	add: #ExternalIntegerTest -> #testPrintOnUnsigned;
	add: #ScintillaViewTest -> #testTokensFromTo;
	yourself.

package binaryGlobalNames: (Set new
	yourself).

package globalAliases: (Set new
	yourself).

package setPrerequisites: #(
	'..\Community Edition\ActiveX Automation Development'
	'..\..\..\Samples\MVP\Animal Game\Animals'
	'..\..\System\Continuations\Continuation Tests'
	'Development System'
	'..\..\Base\Dolphin'
	'..\..\Base\Dolphin Base Tests'
	'..\..\System\Base64\Dolphin Base64'
	'..\..\MVP\Base\Dolphin Basic Geometry'
	'..\..\MVP\Views\Common Controls\Dolphin Common Controls'
	'..\..\MVP\Dialogs\Common\Dolphin Common Dialogs'
	'..\..\Base\Dolphin Legacy Date & Time'
	'..\..\MVP\Base\Dolphin MVP Base'
	'..\..\MVP\Dolphin MVP Tests'
	'..\..\Registry\Dolphin Registry Access'
	'..\..\Lagoon\Lagoon Image Stripper'
	'..\..\ActiveX\COM\OLE COM'
	'..\..\..\..\Contributions\Refactory\Refactoring Browser\Environments\RBEnvironments'
	'..\..\..\..\Contributions\Refactory\Refactoring Browser\SmallLint\RBSmallLint'
	'..\..\..\..\Contributions\Refactory\Refactoring Browser\Tests\RBTests'
	'..\..\System\Compiler\Smalltalk Parser'
	'..\..\..\..\Contributions\Camp Smalltalk\SUnit\SUnit'
	'..\..\ActiveX\Components\XML DOM\XML DOM').

package!

"Class Definitions"!

Object subclass: #DolphinCompilerTestMethods
	instanceVariableNames: 'iv1 iv2'
	classVariableNames: 'Const'
	poolDictionaries: ''
	classInstanceVariableNames: ''!

DolphinCompilerTestMethods subclass: #DolphinCompilerTestMethodsSubclass
	instanceVariableNames: ''
	classVariableNames: ''
	poolDictionaries: ''
	classInstanceVariableNames: ''!

StParseNodeVisitor subclass: #StStyler
	instanceVariableNames: 'view arrayDepth'
	classVariableNames: ''
	poolDictionaries: ''
	classInstanceVariableNames: ''!

TestCase subclass: #RewriteTestCase
	instanceVariableNames: 'env'
	classVariableNames: ''
	poolDictionaries: ''
	classInstanceVariableNames: ''!

DolphinTest subclass: #AbstractParserErrorTest
	instanceVariableNames: ''
	classVariableNames: ''
	poolDictionaries: 'SmalltalkParseErrorCodes'
	classInstanceVariableNames: ''!

DolphinTest subclass: #CompiledMethodTest
	instanceVariableNames: ''
	classVariableNames: ''
	poolDictionaries: ''
	classInstanceVariableNames: ''!

DolphinTest subclass: #CompilerTest
	instanceVariableNames: 'defaultCompileFlags'
	classVariableNames: 'TempInstrs'
	poolDictionaries: 'CompilerFlags OpcodePool SmalltalkParseErrorCodes'
	classInstanceVariableNames: ''!

DolphinTest subclass: #KeyedAspectTest
	instanceVariableNames: ''
	classVariableNames: ''
	poolDictionaries: ''
	classInstanceVariableNames: ''!

DolphinTest subclass: #ProductReleaseTest
	instanceVariableNames: ''
	classVariableNames: ''
	poolDictionaries: ''
	classInstanceVariableNames: ''!

DolphinTest subclass: #RegKeyTest
	instanceVariableNames: 'testKey'
	classVariableNames: ''
	poolDictionaries: 'WinRegConstants'
	classInstanceVariableNames: ''!

DolphinTest subclass: #SmalltalkParserTest
	instanceVariableNames: ''
	classVariableNames: ''
	poolDictionaries: 'ExtCallArgTypes SmalltalkParseErrorCodes'
	classInstanceVariableNames: ''!

DolphinTest subclass: #SmalltalkSystemTest
	instanceVariableNames: 'devsys'
	classVariableNames: ''
	poolDictionaries: ''
	classInstanceVariableNames: ''!

DolphinTest subclass: #VersionResourceTest
	instanceVariableNames: 'updatePath sourceModule sourceSize sourceBytes'
	classVariableNames: ''
	poolDictionaries: ''
	classInstanceVariableNames: ''!

DolphinTest subclass: #VMTest
	instanceVariableNames: 'expiryHandler'
	classVariableNames: ''
	poolDictionaries: 'CRTConstants'
	classInstanceVariableNames: ''!

DolphinTest subclass: #XMLDOMNodeTest
	instanceVariableNames: ''
	classVariableNames: ''
	poolDictionaries: ''
	classInstanceVariableNames: ''!

AbstractParserErrorTest subclass: #CompilerErrorTest
	instanceVariableNames: ''
	classVariableNames: ''
	poolDictionaries: 'CompilerFlags'
	classInstanceVariableNames: ''!

PresenterTest subclass: #SmalltalkWorkspaceTest
	instanceVariableNames: ''
	classVariableNames: ''
	poolDictionaries: ''
	classInstanceVariableNames: ''!

ImageViewAbstractTest subclass: #ImageListViewTest
	instanceVariableNames: ''
	classVariableNames: ''
	poolDictionaries: ''
	classInstanceVariableNames: ''!

BrowserEnvironmentTest subclass: #MethodCategoryEnvironmentTest
	instanceVariableNames: ''
	classVariableNames: ''
	poolDictionaries: ''
	classInstanceVariableNames: ''!

BrowserEnvironmentTest subclass: #PackageEnvironmentTest
	instanceVariableNames: ''
	classVariableNames: ''
	poolDictionaries: ''
	classInstanceVariableNames: ''!

BrowserEnvironmentTest subclass: #PluggableEnvironmentTest
	instanceVariableNames: ''
	classVariableNames: ''
	poolDictionaries: ''
	classInstanceVariableNames: ''!

DolphinTestClassResource subclass: #CompilerTestClasses
	instanceVariableNames: 'testClass'
	classVariableNames: ''
	poolDictionaries: ''
	classInstanceVariableNames: ''!

"Loose Methods"!

!BorderLayoutTest methodsFor!

testResourceBrowserPreview
	"#1758"

	| resourceId resourceView |
	resourceId := ResourceIdentifier class: ResourceBrowser name: 'Default view'.
	resourceView := DesignDesktopView default loadViewResource: resourceId resource forEdit: false.
	
	[| bmp toolbox resources |
	bmp := resourceView notNil
				ifTrue: 
					[resourceView invalidateLayoutDeeply.
					Bitmap fromView: resourceView]
				ifFalse: [Error icon].
	toolbox := resourceView viewNamed: 'resourceToolbox'.
	resources := resourceView viewNamed: 'resources'.
	self assert: (resources viewNamed: 'resources') extent x equals: resources extent x]
			ensure: [resourceView destroy]! !

!BorderLayoutTest categoriesForMethods!
testResourceBrowserPreview!public!unit tests! !
!

!ExternalIntegerTest methodsFor!

testPrintOnNull
	| subject |
	subject := DWORD new.
	self assert: subject printString equals: 'a DWORD(0)'!

testPrintOnSigned
	| subject |
	subject := SDWORD fromInteger: 123.
	self assert: subject printString equals: 'a SDWORD(123)'!

testPrintOnUnsigned
	| subject |
	subject := DWORD fromInteger: 123.
	self assert: subject printString equals: 'a DWORD(16r7B)'! !

!ExternalIntegerTest categoriesForMethods!
testPrintOnNull!public!unit tests! !
testPrintOnSigned!public!unit tests! !
testPrintOnUnsigned!public!unit tests! !
!

!ScintillaViewTest methodsFor!

testTokensFromTo
	| tokens expected styler |
	presenter textStyles: SmalltalkWorkspace textStyles.
	presenter stylerClass: SmalltalkExpressionStyler.
	styler := StStyler new.
	#('' ' ' ' 	 ' ' a' 'a ' ' a ' ' a #a' 'a #a ' ' a #a ' ' a #a 1.2 '''' ''blah blah'' (') do: 
			[:text |
			presenter text: text.
			presenter restyleAll.
			tokens := (presenter tokensFrom: 1 to: presenter textLength) asArray.
			expected := (SmalltalkScanner on: presenter text readStream) contents
						collect: [:each | (styler styleNameFor: each) -> (text copyFrom: each start to: each stop)].
			self assert: tokens equals: expected]! !

!ScintillaViewTest categoriesForMethods!
testTokensFromTo!public!unit tests! !
!

"End of package definition"!

