| package |
package := Package name: 'Dolphin SpinButton Control'.
package paxVersion: 2.1;
	preDeclareClassesOnLoad: false;
	basicComment: 'Dolphin Smalltalk SpinButton Common Control.
Copyright (c) Object Arts Ltd 2005.

This package contains an MVP View wrapper for the Windows "Up-Down" common control. Please see the SpinButton class comment for further details.

Note that this package replaces the default <IntegerPrompter> view with one that uses a SpinButton. If you wish to retain this enhanced IntegerPrompter in your deployed applications you may need to make this package a manual prerequisite, although this will not be necessary if you are using SpinButtons elsewhere in your own views or dialogs.'.

package basicPackageVersion: '6.1'.


package setClassNames: #(
	#{OS.NMUPDOWN}
	#{OS.UDACCEL}
	#{OS.UpDownControlConstants}
	#{UI.SpinButton}
).

package setMethodNames: #(
	#(#{UI.IntegerPrompter class} #defaultView)
	#(#{UI.IntegerPrompter class} #resource_Spinner_view)
	#(#{UI.NumberPresenter class} #resource_Spin_button)
).

package setPrerequisites: #(
	'..\..\..\System\Win32\CommCtrl\Common Controls Library'
	'..\..\..\Base\Dolphin'
	'..\..\Base\Dolphin Base Dialogs'
	'..\..\Base\Dolphin Basic Geometry'
	'..\..\Graphics\Dolphin GDI Graphics'
	'..\..\Presenters\Prompters\Dolphin Integer Prompter'
	'..\..\Base\Dolphin MVP Base'
	'..\..\Presenters\Number\Dolphin Number Presenter'
	'..\Buttons\Dolphin Push Buttons'
	'..\..\Presenters\Text\Dolphin Text Presenter'
	'..\..\Type Converters\Dolphin Type Converters'
	'..\..\Models\Value\Dolphin Value Models'
).

package!

"Class Definitions"!

Kernel.SharedPool
	subclass: #'OS.UpDownControlConstants'
	instanceVariableNames: ''
	classVariableNames: ''
	imports: #()
	classInstanceVariableNames: ''
	classConstants: {
			'UD_MAXVAL' -> 16r7FFF.
			'UD_MINVAL' -> -16r7FFF.
			'UDM_GETACCEL' -> 16r46C.
			'UDM_GETBASE' -> 16r46E.
			'UDM_GETBUDDY' -> 16r46A.
			'UDM_GETPOS' -> 16r468.
			'UDM_GETPOS32' -> 16r472.
			'UDM_GETRANGE' -> 16r466.
			'UDM_GETRANGE32' -> 16r470.
			'UDM_SETACCEL' -> 16r46B.
			'UDM_SETBASE' -> 16r46D.
			'UDM_SETBUDDY' -> 16r469.
			'UDM_SETPOS' -> 16r467.
			'UDM_SETPOS32' -> 16r471.
			'UDM_SETRANGE' -> 16r465.
			'UDM_SETRANGE32' -> 16r46F.
			'UDN_DELTAPOS' -> -16r2D2.
			'UDN_FIRST' -> -16r2D1.
			'UDN_LAST' -> -16r2E4.
			'UDS_ALIGNLEFT' -> 16r8.
			'UDS_ALIGNRIGHT' -> 16r4.
			'UDS_ARROWKEYS' -> 16r20.
			'UDS_AUTOBUDDY' -> 16r10.
			'UDS_HORZ' -> 16r40.
			'UDS_HOTTRACK' -> 16r100.
			'UDS_NOTHOUSANDS' -> 16r80.
			'UDS_SETBUDDYINT' -> 16r2.
			'UDS_WRAP' -> 16r1
		}!
OS.Win32Structure
	subclass: #'OS.UDACCEL'
	instanceVariableNames: ''
	classVariableNames: ''
	imports: #()
	classInstanceVariableNames: ''
	classConstants: { '_OffsetOf_nInc' -> 16r4. '_OffsetOf_nSec' -> 16r0. '_UDACCEL_Size' -> 16r8 }!
OS.NMHDR
	subclass: #'OS.NMUPDOWN'
	instanceVariableNames: 'allow'
	classVariableNames: ''
	imports: #()
	classInstanceVariableNames: ''
	classConstants: { '_NMUPDOWN_Size' -> 16r14. '_OffsetOf_iDelta' -> 16r10. '_OffsetOf_iPos' -> 16rC }!
UI.ValueConvertingControlView
	subclass: #'UI.SpinButton'
	instanceVariableNames: ''
	classVariableNames: ''
	imports: #(#{OS.UpDownControlConstants})
	classInstanceVariableNames: ''
	classConstants: {
			'AlignmentMap'
				-> (IdentityDictionary withAll: { #left -> 16r8. #right -> 16r4. #unattached -> 16r0 }).
			'AlignmentMask' -> 16rC
		}!

"Loose Methods"!

!UI.IntegerPrompter class methodsFor!

defaultView
	^'Spinner view'!

resource_Spinner_view
	"Answer the literal data from which the 'Spinner view' resource can be reconstituted.
	DO NOT EDIT OR RECATEGORIZE THIS METHOD.

	If you wish to modify this resource evaluate:
	Tools.ViewComposer openOn: (UI.ResourceIdentifier class: self selector: #resource_Spinner_view)
	"

	^#(#'!!STL' 5 985166 10 #{UI.STBViewProxy} #{UI.DialogView} 34 30 nil nil 8 #(13107200 65536) 416 nil 1245702 #{Graphics.ThemeColor} #dialog nil 167 nil 852998 #{Graphics.Font} nil true 721158 #{OS.LOGFONTW} 8 #[244 255 255 255 0 0 0 0 0 0 0 0 0 0 0 0 144 1 0 0 0 0 0 0 3 2 1 34 83 0 101 0 103 0 111 0 101 0 32 0 85 0 73 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] 918022 #{Graphics.Point} 193 193 nil 416 1048838 #{UI.FramingLayout} 170 176 34 8 410 #{UI.TextEdit} 34 16 nil 416 34 2 8 1140924544 1025 672 nil 917510 #{Graphics.Color} #default nil 7 nil nil nil 672 nil 8 1829969664 1049670 1 #{UI.IntegerToText} nil 8 '' 721222 1 #{Core.Locale} #userDefault nil 5 1310982 #{Core.MessageSequence} 34 4 1049350 #{Core.MessageSend} #createAt:extent: 34 2 578 291 31 578 121 41 672 914 #text: 34 1 8 '0' 672 914 #selectionRange: 34 1 852742 #{Core.Interval} 3 3 3 672 914 #setMarginWidths: 34 1 8 #(3 3) 672 1179910 #{OS.WINDOWPLACEMENT} 8 #[44 0 0 0 0 0 0 0 1 0 0 0 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 145 0 0 0 15 0 0 0 205 0 0 0 35 0 0 0] 8 #() 578 193 193 nil 27 1378374 2 #{UI.FramingConstraints} 1377286 #{UI.FramingCalculation} #fixedPreviousRight 21 1266 #fixedViewLeft 121 1266 #fixedParentTop 1 1266 #fixedViewTop 41 410 #{UI.SpinButton} 34 15 nil 416 34 2 8 1140916276 1 1344 918598 2 #{UI.ValueHolder} nil nil 1835526 #{Kernel.PluggableSearchPolicy} 786950 #{Core.Message} #= 8 #() 1474 #hash 8 #() 1 752 nil 7 nil nil nil 1344 nil 8 1829624832 1049094 #{UI.NullConverter} nil nil 866 34 3 914 #createAt:extent: 34 2 578 411 31 578 29 41 1344 914 #setRange: 34 1 1074 3 201 3 1344 914 #udmSetAccel: 34 1 1508678 1 #{External.StructureArray} 8 #[0 0 0 0 1 0 0 0 2 0 0 0 5 0 0 0 5 0 0 0 20 0 0 0] 7 #{OS.UDACCEL} nil 17 1344 1154 8 #[44 0 0 0 0 0 0 0 1 0 0 0 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 205 0 0 0 15 0 0 0 219 0 0 0 35 0 0 0] 8 #() 1216 nil 27 1234 1280 1 1296 29 1266 #fixedPreviousTop 1 1266 #fixedPreviousBottom 1 410 #{UI.StaticText} 34 16 nil 416 34 2 8 1140850944 1 1920 1410 nil nil 1572870 #{Kernel.NeverSearchPolicy} 8 '' nil nil 7 nil nil nil 1920 nil 8 1830013856 1570 nil nil true 866 34 2 914 #createAt:extent: 34 2 578 41 31 578 231 81 1920 914 #text: 34 1 8 'Enter number:' 1920 1154 8 #[44 0 0 0 0 0 0 0 1 0 0 0 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 20 0 0 0 15 0 0 0 135 0 0 0 55 0 0 0] 8 #() 1216 nil 27 1234 1266 #fixedParentLeft 21 1296 231 1312 1 1328 81 410 #{UI.ReferenceView} 34 14 nil 416 34 2 8 1140850688 131073 2304 nil nil nil 7 nil nil nil 2304 1376838 1 #{UI.ResourceIdentifier} #{UI.Presenter} #resource_OK_Cancel_button_block nil 866 34 1 914 #createAt:extent: 34 2 578 25 129 578 419 63 2304 1154 8 #[44 0 0 0 0 0 0 0 1 0 0 0 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 12 0 0 0 64 0 0 0 221 0 0 0 95 0 0 0] 8 #() 1216 nil 27 1234 2288 5 1266 #fixedParentRight 5 1266 #fixedViewBottom -61 1266 #fixedParentBottom 7 170 192 34 6 1344 8 'spinner' 672 8 'reply' 1920 8 'prompt' 1180166 #{Graphics.Rectangle} 578 21 31 578 21 21 nil nil nil nil 15269 nil nil nil nil 1 nil nil 918278 #{Core.Semaphore} nil nil 1 nil 8 2007530256 866 34 2 914 #createAt:extent: 34 2 578 12287 21 578 491 283 416 914 #text: 34 1 8 'Please respond:' 416 1154 8 #[44 0 0 0 0 0 0 0 0 0 0 0 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 23 0 0 10 0 0 0 244 24 0 0 151 0 0 0] 34 4 1920 672 1344 2304 1216 nil 27)! !
!UI.IntegerPrompter class categoriesForMethods!
defaultView!constants!public! !
resource_Spinner_view!public!resources-views! !
!

!UI.NumberPresenter class methodsFor!

resource_Spin_button
	"Answer the literal data from which the 'Spin button' resource can be reconstituted.
	DO NOT EDIT OR RECATEGORIZE THIS METHOD.

	If you wish to modify this resource evaluate:
	Tools.ViewComposer openOn: (UI.ResourceIdentifier class: self selector: #resource_Spin_button)
	"

	^#(#'!!STL' 5 985166 10 #{UI.STBViewProxy} #{UI.SpinButton} 34 15 nil nil 34 2 8 1140916240 1 416 918598 2 #{UI.ValueHolder} nil nil 1835526 #{Kernel.PluggableSearchPolicy} 786950 #{Core.Message} #= 8 #() 546 #hash 8 #() 1 917510 #{Graphics.Color} #default nil 7 nil nil nil 416 nil 8 1829624832 1049094 #{UI.NullConverter} nil nil 1310982 #{Core.MessageSequence} 34 3 1049350 #{Core.MessageSend} #createAt:extent: 34 2 918022 #{Graphics.Point} 12287 21 802 35 51 416 754 #setRange: 34 1 852742 #{Core.Interval} 3 201 3 416 754 #udmSetAccel: 34 1 1508678 1 #{External.StructureArray} 8 #[0 0 0 0 1 0 0 0 2 0 0 0 5 0 0 0 5 0 0 0 20 0 0 0] 7 #{OS.UDACCEL} nil 17 416 1179910 #{OS.WINDOWPLACEMENT} 8 #[44 0 0 0 0 0 0 0 1 0 0 0 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 23 0 0 10 0 0 0 16 24 0 0 35 0 0 0] 8 #() 802 193 193 nil 27)! !
!UI.NumberPresenter class categoriesForMethods!
resource_Spin_button!public!resources-views! !
!

"End of package definition"!

