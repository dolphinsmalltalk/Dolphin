"Filed out from Dolphin Smalltalk 7"!

ValueDialog subclass: #ScintillaTextStylesDialog
	instanceVariableNames: 'stylesPresenter'
	classVariableNames: ''
	poolDictionaries: ''
	classInstanceVariableNames: ''!
ScintillaTextStylesDialog guid: (GUID fromString: '{e768b8d3-ca27-4c94-b60d-7fbf3dd4e34a}')!
ScintillaTextStylesDialog comment: 'ScintillaTextStylesDialog is a <valueDialogPresenter> that can be used to edit a collection of <ScintillaTextStyles> in order to configure the visual styles in a <ScintillaView>. It is intended for use in applications, and so does not allow the addition or removal of styles, nor the editing of style names. However this could be changed by defining a different view that used the ScintillaStylesCollectionPresenter ''Developer view'' instead of the ''Default view''.

For example usage see the XmlPad sample.

Instance Variables:
	stylesPresenter		<ScintillaStylesCollectionPresenter>
'!
!ScintillaTextStylesDialog categoriesForClass!MVP-Presenters! !
!ScintillaTextStylesDialog methodsFor!

createComponents
	"Private - Create the presenters contained by the receiver"

	super createComponents.
	stylesPresenter := self add: ScintillaStylesCollectionPresenter new name: 'styles'!

defaultStyle
	^stylesPresenter defaultStyle!

defaultStyle: aScintillaTextStyle 
	"Set the default style to be used for style facets for which no setting is specified, i.e.
	this style specifies the style facets that will be inherited from the view settings
	Typically this will include the font and background color. These style facets are then
	overridden by first the #normal style, and then any specific style. "

	stylesPresenter defaultStyle: aScintillaTextStyle!

model: aSubjectModel 
	"Connect the receiver to aSubjectModel. The reply presenter shares this
	same model since it is responsible for editing it's value"

	| styles |
	super model: aSubjectModel.
	styles := ((self model value collect: [:each | each copy]) 
				asSortedCollection: [:a :b | a name <= b name]) asValue.
	#todo.	"Sort out CollectionPresenter so don't need to use NeverSearchPolicy - problem is that it won't trigger any changes
	without this when the list is edited, since it compares the current value against itself"
	styles comparisonPolicy: SearchPolicy never.
	stylesPresenter model: styles.
	styles 
		when: #valueChanged
		send: #onStylesChanged
		to: self!

onStylesChanged
	"The style collection (a copy) has been changed, so transfer this across to the receiver's value buffer."

	self value: stylesPresenter value! !
!ScintillaTextStylesDialog categoriesFor: #createComponents!initializing!private! !
!ScintillaTextStylesDialog categoriesFor: #defaultStyle!accessing!public! !
!ScintillaTextStylesDialog categoriesFor: #defaultStyle:!accessing!public! !
!ScintillaTextStylesDialog categoriesFor: #model:!accessing!public! !
!ScintillaTextStylesDialog categoriesFor: #onStylesChanged!event handling!private! !

!ScintillaTextStylesDialog class methodsFor!

defaultModel
	^OrderedCollection with: ScintillaTextStyle normal!

icon
	"Answers an Icon that can be used to represent this class."

	^ScintillaTextStyle icon
!

resource_Default_view
	"Answer the literal data from which the 'Default view' resource can be reconstituted.
	DO NOT EDIT OR RECATEGORIZE THIS METHOD.

	If you wish to modify this resource evaluate:
	ViewComposer openOn: (ResourceIdentifier class: self selector: #resource_Default_view)
	"

	^#(#'!!STL' 4 788558 10 ##(Smalltalk.STBViewProxy) ##(Smalltalk.DialogView) 34 30 nil nil 8 #(13369344 65536) 416 nil 524550 ##(Smalltalk.ColorRef) 8 4278190080 nil 167 nil 263174 ##(Smalltalk.Font) nil true 524550 ##(Smalltalk.LOGFONTW) 8 #[244 255 255 255 0 0 0 0 0 0 0 0 0 0 0 0 144 1 0 0 0 0 0 0 3 2 1 34 83 0 101 0 103 0 111 0 101 0 32 0 85 0 73 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] 328198 ##(Smalltalk.Point) 193 193 nil 416 788230 ##(Smalltalk.BorderLayout) 1 21 nil 410 ##(Smalltalk.ContainerView) 34 15 nil 416 34 2 8 1140850688 131073 656 nil nil nil 7 nil nil nil 656 626 1 1 410 ##(Smalltalk.StaticRectangle) 34 14 nil 656 34 2 8 1140850960 1 736 nil nil nil 7 nil nil nil 736 nil 8 1906774720 983302 ##(Smalltalk.MessageSequence) 138 144 34 2 721670 ##(Smalltalk.MessageSend) #createAt:extent: 34 2 594 1 1 594 821 5 736 882 #isEnabled: 8 #(false) 736 983302 ##(Smalltalk.WINDOWPLACEMENT) 8 #[44 0 0 0 0 0 0 0 1 0 0 0 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 0 0 0 0 0 0 0 0 154 1 0 0 2 0 0 0] 8 #() 594 193 193 nil 27 nil nil nil 410 ##(Smalltalk.ReferenceView) 34 14 nil 656 34 2 8 1140850688 131073 1072 nil nil nil 7 nil nil nil 1072 1180166 ##(Smalltalk.ResourceIdentifier) ##(Smalltalk.Presenter) #resource_OK_Cancel_button_block nil 818 138 144 34 1 882 #createAt:extent: 34 2 594 1 5 594 821 77 1072 994 8 #[44 0 0 0 0 0 0 0 1 0 0 0 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 0 0 0 0 2 0 0 0 154 1 0 0 40 0 0 0] 8 #() 1056 nil 27 170 192 1312 nil 818 138 144 34 1 882 #createAt:extent: 34 2 594 21 737 594 821 81 656 994 8 #[44 0 0 0 0 0 0 0 1 0 0 0 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 10 0 0 0 112 1 0 0 164 1 0 0 152 1 0 0] 34 2 736 1072 1056 nil 27 nil nil 410 ##(Smalltalk.ReferenceView) 34 14 nil 416 34 2 8 1140850688 131073 1504 nil nil nil 7 nil nil nil 1504 1138 ##(Smalltalk.ScintillaStylesCollectionPresenter) #resource_Default_view nil 818 138 144 34 1 882 #createAt:extent: 34 2 594 21 21 594 821 697 1504 994 8 #[44 0 0 0 0 0 0 0 1 0 0 0 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 10 0 0 0 10 0 0 0 164 1 0 0 102 1 0 0] 1312 1056 nil 27 170 192 34 2 1504 8 'styles' 590342 ##(Smalltalk.Rectangle) 594 21 21 594 21 21 nil nil nil nil 24889 nil nil nil 594 885 915 1 nil nil 590598 ##(Smalltalk.Semaphore) nil nil 1 nil 8 2010075552 818 138 144 34 3 882 #createAt:extent: 34 2 594 3839 21 594 893 915 416 882 #text: 34 1 8 'Text Styles' 416 882 #updateMenuBar 1312 416 994 8 #[44 0 0 0 0 0 0 0 0 0 0 0 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 255 127 7 0 0 10 0 0 0 61 9 0 0 211 1 0 0] 34 2 1504 656 1056 nil 27 )! !
!ScintillaTextStylesDialog class categoriesFor: #defaultModel!constants!public! !
!ScintillaTextStylesDialog class categoriesFor: #icon!accessing!constants!public! !
!ScintillaTextStylesDialog class categoriesFor: #resource_Default_view!public!resources-views! !

